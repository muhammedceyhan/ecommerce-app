<button routerLink="/admin">â¬…ï¸ Admin Paneline DÃ¶n</button>

<h2>ğŸ›¡ï¸ Admin Yorum Paneli</h2>

<!-- Arama Kutusu -->
<input
  type="text"
  placeholder="ÃœrÃ¼n adÄ± veya yorum ara..."
  [(ngModel)]="searchTerm"
  (input)="applyFilters()"
  style="margin-bottom: 12px; padding: 6px; width: 100%; max-width: 400px;"
/>

<!-- SÄ±ralama ButonlarÄ± -->
<div class="sort-controls">
  <button (click)="changeSort('product')">
    ÃœrÃ¼n adÄ±na gÃ¶re sÄ±rala ({{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }})
  </button>
  <button (click)="changeSort('rating')">
    PuanÄ±na gÃ¶re sÄ±rala ({{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }})
  </button>
</div>

<!-- Yorum Listesi -->
<div *ngFor="let entry of filteredReviews" class="review-box">
  <p><strong>ÃœrÃ¼n:</strong> {{ entry.product.name }}</p>
  <p><strong>Kategori:</strong> {{ entry.product.category }}</p>
  <p><strong>Yorum:</strong> {{ entry.review.comment }}</p>
  <p><strong>Puan:</strong> {{ entry.review.rating }}/5</p>
  <button (click)="deleteReview(entry.review.id!)">âŒ Yorumu Sil</button>
  <hr />
</div>


<!-- Yorum satÄ±rÄ±na tÄ±klayÄ±nca detay modalÄ± -->
<div
  *ngFor="let entry of filteredReviews"
  class="review-box"
  (click)="openModal(entry)"
  style="cursor: pointer;"
>
  <p><strong>ÃœrÃ¼n:</strong> {{ entry.product.name }}</p>
  <p><strong>Yorum:</strong> {{ entry.review.comment | slice:0:50 }}...</p>
</div>


<!-- Modal -->
<div class="modal" *ngIf="selectedReview">
  <div class="modal-content">
    <h3>ğŸ“ Yorum DetayÄ±</h3>
    <p><strong>ÃœrÃ¼n:</strong> {{ selectedReview.product.name }}</p>
    <p><strong>Kategori:</strong> {{ selectedReview.product.category }}</p>
    <p><strong>Puan:</strong> {{ selectedReview.review.rating }} / 5</p>
    <p><strong>Yorum:</strong> {{ selectedReview.review.comment }}</p>
    <p><strong>Tarih:</strong> {{ selectedReview.review.commentDate | date:'medium' }}</p>

    <button (click)="selectedReview = null">Kapat</button>
  </div>
</div>

<button (click)="changeSort('date')">
  Tarihe gÃ¶re sÄ±rala ({{ sortDirection === 'asc' ? 'â†‘' : 'â†“' }})
</button>

<label>
  <input type="checkbox" [(ngModel)]="hideBadReviews" (change)="applyFilters()" />
  ğŸ”½ Sadece kÃ¶tÃ¼ yorumlarÄ± gizle (1â€“2â€“3 puan)
</label>
